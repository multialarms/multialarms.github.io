<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Master Control Alarm Clock</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
    font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
    background:linear-gradient(135deg,#1e3c72 0%,#2a5298 100%);
    color:#fff;
    min-height:100vh;
    padding:20px;
}
.header{
    text-align:center;
    margin-bottom:30px;
    padding:20px;
    background:rgba(0,0,0,0.3);
    border-radius:10px;
    box-shadow:0 4px 15px rgba(0,0,0,0.2);
}
.header-title{
    font-size:2.5em;
    font-weight:300;
    letter-spacing:2px;
    margin-bottom:10px;
    border:none;
    background:transparent;
    color:white;
    text-align:center;
    width:100%;
    cursor:text;
}
.header-title:focus{
    outline:none;
    background:rgba(255,255,255,0.1);
    border-radius:6px;
}
.current-time{font-size:1.2em;opacity:0.9;}
.alarms-container{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(400px,1fr));
    gap:20px;
    max-width:1400px;
    margin:0 auto;
}
.alarm-card{
    background:rgba(255,255,255,0.1);
    border-radius:15px;
    padding:20px;
    backdrop-filter:blur(10px);
    border:1px solid rgba(255,255,255,0.2);
    box-shadow:0 8px 32px rgba(0,0,0,0.1);
    transition:all 0.3s ease;
}
.alarm-card:hover{
    transform:translateY(-2px);
    box-shadow:0 12px 40px rgba(0,0,0,0.2);
}
.alarm-card.active{border-color:#4CAF50;background:rgba(76,175,80,0.1);}
.alarm-card.ringing{
    animation: ringPulse 1s infinite, flashAlarm 1s infinite;
    border-color: #FF5722;
    background: rgba(255, 87, 34, 0.2);
}
@keyframes ringPulse{
    0%,100%{transform:scale(1);}
    50%{transform:scale(1.02);}
}
@keyframes flashAlarm{
    0%{background-color:rgba(255,87,34,0.3);box-shadow:0 0 15px #FF5722;}
    50%{background-color:rgba(255,255,0,0.4);box-shadow:0 0 20px #FFD700;}
    100%{background-color:rgba(255,87,34,0.3);box-shadow:0 0 15px #FF5722;}
}
.alarm-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:15px;
    gap:10px;
}
.alarm-number{font-size:1.2em;font-weight:bold;color:#FFD700;}
.alarm-toggle{position:relative;width:60px;height:30px;}
.alarm-toggle input{opacity:0;width:0;height:0;}
.slider{
    position:absolute;
    cursor:pointer;
    top:0;left:0;right:0;bottom:0;
    background-color:#ccc;
    transition:0.4s;
    border-radius:30px;
}
.slider:before{
    position:absolute;
    content:"";
    height:22px;
    width:22px;
    left:4px;
    bottom:4px;
    background-color:white;
    transition:0.4s;
    border-radius:50%;
}
input:checked + .slider{background-color:#4CAF50;}
input:checked + .slider:before{transform:translateX(30px);}
.alarm-description{
    width:100%;
    padding:10px;
    margin-bottom:15px;
    border:1px solid rgba(255,255,255,0.3);
    border-radius:8px;
    background:rgba(255,255,255,0.1);
    color:white;
    font-size:14px;
}
.alarm-description::placeholder{color:rgba(255,255,255,0.6);}
.time-day-container{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:15px;
    margin-bottom:15px;
}
.time-input,.sound-select,.auto-snooze-select{
    padding:10px;
    border:1px solid rgba(255,255,255,0.3);
    border-radius:8px;
    background:rgba(255,255,255,0.1);
    color:black;
    font-size:14px;
}
.sound-container{display:flex;gap:10px;align-items:center;}
.sound-select{flex:1;}
.auto-snooze-block {
    margin-top:12px;
}
.test-sound-btn,.snooze-btn{
    padding:8px 15px;
    border:none;
    border-radius:6px;
    background:rgba(255,255,255,0.2);
    color:white;
    cursor:pointer;
    transition:all 0.3s ease;
    font-size:12px;
}
.test-sound-btn:hover,.snooze-btn:hover{background:rgba(255,255,255,0.3);}
.test-sound-btn.playing{
    background:#4CAF50 !important;
    box-shadow:0 0 10px #4CAF50;
}
.snooze-btn{
    background:#FF5722;
    width:100%;
    padding:12px;
    font-size:14px;
    font-weight:bold;
    display:none;
}
.snooze-btn.visible{display:block;}
.status{font-size:12px;opacity:0.8;text-align:center;margin-top:10px;}
.days-grid{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:5px;
    margin-bottom:15px;
}
.day-checkbox{display:none;}
.day-label{
    padding:8px 4px;
    text-align:center;
    border:1px solid rgba(255,255,255,0.3);
    border-radius:6px;
    cursor:pointer;
    font-size:12px;
    transition:all 0.3s ease;
}
.day-checkbox:checked + .day-label{
    background:#4CAF50;
    border-color:#4CAF50;
}
.add-alarm-card {
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:3em;
    background:rgba(255,255,255,0.1);
    border-radius:15px;
    border:2px dashed rgba(255,255,255,0.4);
    cursor:pointer;
    transition:all 0.3s ease;
}
.add-alarm-card:hover { background:rgba(255,255,255,0.2); }
.remove-alarm-btn {
    background:red;
    color:white;
    border:none;
    border-radius:50%;
    width:24px;
    height:24px;
    cursor:pointer;
    font-weight:bold;
    line-height:1;
}
.remove-alarm-btn:hover { background:darkred; }
.custom-audio-input {
    font-size:12px;
    color:white;
}
</style>
</head>
<body>
<div class="header">
    <input type="text" id="pageTitle" class="header-title">
    <div class="current-time" id="currentTime"></div>
</div>
<div class="alarms-container" id="alarmsContainer"></div>
<script>
class MasterControlAlarms {
    constructor() {
        this.alarms = [];
        this.audioContext = null;
        this.sounds = {
            'Beep': this.generateBeepSound,
            'Chime': this.generateChimeSound,
            'Alert': this.generateAlertSound,
            'Buzz': this.generateBuzzSound,
            'Ding': this.generateDingSound,
            'Horn': this.generateHornSound,
            'Tone': this.generateToneSound,
            'Custom': this.playCustomSound
        };
        this.activeAlarms = new Set();
        this.soundLoops = {};
        this.init();
    }
    init() {
        this.initAudioContext();
        this.loadAlarms();
        this.loadTitle();
        this.createAlarmCards();
        this.startClock();
        this.startAlarmChecker();
        document.getElementById('pageTitle').addEventListener('input',(e)=>{
            localStorage.setItem('pageTitle', e.target.value);
        });
    }
    initAudioContext() {
        try { this.audioContext = new (window.AudioContext || window.webkitAudioContext)(); }
        catch (e) { console.warn('Audio context not supported'); }
    }
    loadTitle(){
        const saved=localStorage.getItem('pageTitle') || 'MASTER CONTROL ALARM CLOCK (CBS POD 1)';
        document.getElementById('pageTitle').value=saved;
    }
    loadAlarms() {
        const savedAlarms = localStorage.getItem('masterControlAlarms');
        if (savedAlarms) { this.alarms = JSON.parse(savedAlarms); }
        else {
            for (let i = 0; i < 20; i++) {
                this.alarms.push({
                    id:i, enabled:false, time:'09:00',
                    days:[false,false,false,false,false,false,false],
                    description:`Alarm ${i+1}`, sound:'Beep',
                    isRinging:false, lastTriggered:null,
                    autoSnoozeTime:10, customSoundUrl:null
                });
            }
        }
    }
    saveAlarms(){localStorage.setItem('masterControlAlarms', JSON.stringify(this.alarms));}
    createAlarmCards(){
        const container=document.getElementById('alarmsContainer');
        container.innerHTML='';
        this.alarms.forEach((alarm,index)=>{
            const card=document.createElement('div');
            card.className=`alarm-card ${alarm.enabled?'active':''}`;
            card.id=`alarm-${index}`;
            card.innerHTML=`
                <div class="alarm-header">
                    <div class="alarm-number">ALARM ${index+1}</div>
                    <button class="remove-alarm-btn" onclick="alarmSystem.removeAlarm(${index})">-</button>
                    <label class="alarm-toggle">
                        <input type="checkbox" ${alarm.enabled?'checked':''} onchange="alarmSystem.toggleAlarm(${index})">
                        <span class="slider"></span>
                    </label>
                </div>
                <input type="text" class="alarm-description" value="${alarm.description}" onchange="alarmSystem.updateDescription(${index}, this.value)">
                <div class="time-day-container">
                    <input type="time" class="time-input" value="${alarm.time}" onchange="alarmSystem.updateTime(${index}, this.value)">
                    <div class="days-grid">
                        ${['S','M','T','W','T','F','S'].map((d,dayIndex)=>`
                            <input type="checkbox" class="day-checkbox" id="day-${index}-${dayIndex}" ${alarm.days[dayIndex]?'checked':''} onchange="alarmSystem.updateDay(${index}, ${dayIndex}, this.checked)">
                            <label class="day-label" for="day-${index}-${dayIndex}">${d}</label>`).join('')}
                    </div>
                </div>
                <div class="sound-container">
                    <select class="sound-select" onchange="alarmSystem.updateSound(${index}, this.value)">
                        ${Object.keys(this.sounds).map(s=>`<option value="${s}" ${alarm.sound===s?'selected':''}>${s}</option>`).join('')}
                    </select>
                    <button class="test-sound-btn" onclick="alarmSystem.testSoundForAlarm(${index}, this)">Test</button>
                </div>
                ${alarm.sound==='Custom' ? `<input type="file" class="custom-audio-input" accept="audio/*" onchange="alarmSystem.updateCustomSound(${index}, this.files[0])">` : ''}
                <div class="auto-snooze-block">
                    <label>Auto-Snooze:
                        <select class="auto-snooze-select" onchange="alarmSystem.updateAutoSnooze(${index}, this.value)">
                            <option value="10" ${alarm.autoSnoozeTime===10?'selected':''}>10 seconds</option>
                            <option value="15" ${alarm.autoSnoozeTime===15?'selected':''}>15 seconds</option>
                            <option value="20" ${alarm.autoSnoozeTime===20?'selected':''}>20 seconds</option>
                            <option value="30" ${alarm.autoSnoozeTime===30?'selected':''}>30 seconds</option>
                            <option value="45" ${alarm.autoSnoozeTime===45?'selected':''}>45 seconds</option>
                            <option value="60" ${alarm.autoSnoozeTime===60?'selected':''}>1 minute</option>
                            <option value="none" ${alarm.autoSnoozeTime===null?'selected':''}>No auto-snooze</option>
                        </select>
                    </label>
                </div>
                <button class="snooze-btn" id="snooze-${index}" onclick="alarmSystem.snoozeAlarm(${index})">SNOOZE</button>
                <div class="status" id="status-${index}">${alarm.enabled?'ARMED':'DISABLED'}</div>
            `;
            container.appendChild(card);
        });
        if(this.alarms.length < 100) {
            const addTile = document.createElement('div');
            addTile.className = 'add-alarm-card';
            addTile.textContent = '+';
            addTile.title = 'Add New Alarm';
            addTile.onclick = () => this.addAlarm();
            container.appendChild(addTile);
        }
    }
    addAlarm(){
        if(this.alarms.length >= 100) return alert('Maximum of 100 alarms reached.');
        const newId = this.alarms.length;
        this.alarms.push({
            id:newId, enabled:false, time:'09:00',
            days:[false,false,false,false,false,false,false],
            description:`Alarm ${newId+1}`, sound:'Beep',
            isRinging:false, lastTriggered:null,
            autoSnoozeTime:10, customSoundUrl:null
        });
        this.saveAlarms();
        this.createAlarmCards();
    }
    removeAlarm(index){
        this.alarms.splice(index,1);
        this.saveAlarms();
        this.createAlarmCards();
    }
    startClock(){
        const updateTime=()=>{
            const now=new Date();
            document.getElementById('currentTime').textContent=
                now.toLocaleDateString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric'})+
                " - "+now.toLocaleTimeString('en-US',{hour12:false});
        };
        updateTime();
        setInterval(updateTime,1000);
    }
    startAlarmChecker(){setInterval(()=>{this.checkAlarms();},1000);}
    checkAlarms(){
        const now=new Date();
        const currentDay=now.getDay();
        const currentTime=now.toTimeString().substr(0,5);
        this.alarms.forEach((alarm,index)=>{
            if(!alarm.enabled || alarm.isRinging) return;
            if(alarm.lastTriggered){
                const diff=(now - new Date(alarm.lastTriggered))/1000;
                if(diff<60) return;
            }
            if(alarm.days[currentDay] && alarm.time===currentTime){
                this.triggerAlarm(index);
            }
        });
    }
    triggerAlarm(index){
        const alarm=this.alarms[index];
        alarm.isRinging=true;
        alarm.lastTriggered=new Date();
        this.activeAlarms.add(index);
        document.getElementById(`alarm-${index}`).classList.add('ringing');
        document.getElementById(`snooze-${index}`).classList.add('visible');
        if (alarm.sound === 'Custom' && alarm.customSoundUrl) {
            this.playCustomSound(alarm.customSoundUrl);
            this.soundLoops[index] = setInterval(()=>this.playCustomSound(alarm.customSoundUrl),2000);
        } else {
            this.playSelectedSound(alarm.sound);
            this.soundLoops[index] = setInterval(()=>this.playSelectedSound(alarm.sound),2000);
        }
        if(alarm.autoSnoozeTime){
            setTimeout(()=>{if(alarm.isRinging) this.snoozeAlarm(index);}, alarm.autoSnoozeTime * 1000);
        }
        this.saveAlarms();
    }
    snoozeAlarm(index){
        const alarm=this.alarms[index];
        alarm.isRinging=false;
        document.getElementById(`alarm-${index}`).classList.remove('ringing');
        document.getElementById(`snooze-${index}`).classList.remove('visible');
        this.activeAlarms.delete(index);
        if(this.soundLoops[index]){
            clearInterval(this.soundLoops[index]);
            delete this.soundLoops[index];
        }
        this.saveAlarms();
    }
    toggleAlarm(index){
        this.alarms[index].enabled=!this.alarms[index].enabled;
        const card=document.getElementById(`alarm-${index}`);
        const status=document.getElementById(`status-${index}`);
        if(this.alarms[index].enabled){
            card.classList.add('active');status.textContent='ARMED';
        } else {
            card.classList.remove('active');status.textContent='DISABLED';
            if(this.alarms[index].isRinging) this.snoozeAlarm(index);
            if(this.soundLoops[index]){
                clearInterval(this.soundLoops[index]);
                delete this.soundLoops[index];
            }
        }
        this.saveAlarms();
    }
    updateDescription(i,v){this.alarms[i].description=v;this.saveAlarms();}
    updateTime(i,v){this.alarms[i].time=v;this.saveAlarms();}
    updateDay(i,d,c){this.alarms[i].days[d]=c;this.saveAlarms();}
    updateAutoSnooze(i,val){this.alarms[i].autoSnoozeTime = (val==='none')?null:parseInt(val,10);this.saveAlarms();}
    updateSound(i,v){this.alarms[i].sound=v;if(v!=='Custom') this.alarms[i].customSoundUrl=null;this.saveAlarms();this.createAlarmCards();}
    updateCustomSound(i,file){if(file){this.alarms[i].customSoundUrl=URL.createObjectURL(file);this.saveAlarms();}}
    playSelectedSound(type){if(this.sounds[type]) this.sounds[type].call(this);}
    playCustomSound(url){if(url){const audio=new Audio(url);audio.play();}}
    generateBeepSound(){for(let i=0;i<5;i++){this.playTone(800,'sine',0.15,this.audioContext.currentTime+i*0.25);}}
    generateChimeSound(){let t=this.audioContext.currentTime;this.playTone(523,'triangle',0.3,t);this.playTone(659,'triangle',0.3,t+0.4);this.playTone(784,'triangle',0.3,t+0.8);}
    generateAlertSound(){let t=this.audioContext.currentTime;for(let i=0;i<3;i++){this.playTone(1000,'square',0.2,t+i*0.3);this.playTone(600,'square',0.2,t+0.15+i*0.3);}}
    generateBuzzSound(){let t=this.audioContext.currentTime;const o=this.audioContext.createOscillator(),g=this.audioContext.createGain();o.type='sawtooth';o.frequency.setValueAtTime(200,t);g.gain.setValueAtTime(0.25,t);o.connect(g);g.connect(this.audioContext.destination);o.start(t);o.stop(t+1.2);}
    generateDingSound(){let t=this.audioContext.currentTime;this.playTone(880,'sine',0.6,t);this.playTone(1760,'sine',0.5,t+0.35);}
    generateHornSound(){let t=this.audioContext.currentTime;const o=this.audioContext.createOscillator(),g=this.audioContext.createGain();o.type='square';o.frequency.setValueAtTime(440,t);g.gain.setValueAtTime(0.1,t);g.gain.linearRampToValueAtTime(0.5,t+0.25);g.gain.linearRampToValueAtTime(0.1,t+0.8);o.connect(g);g.connect(this.audioContext.destination);o.start(t);o.stop(t+1.0);}
    generateToneSound(){for(let i=0;i<4;i++){this.playTone(880,'sine',0.3,this.audioContext.currentTime+i*0.35);}}
    playTone(freq,type,duration,startTime=this.audioContext.currentTime){
        if(!this.audioContext) return;
        const o=this.audioContext.createOscillator(),g=this.audioContext.createGain();
        o.connect(g);g.connect(this.audioContext.destination);
        o.type=type;o.frequency.setValueAtTime(freq,startTime);
        g.gain.setValueAtTime(0.3,startTime);
        g.gain.exponentialRampToValueAtTime(0.01,startTime+duration);
        o.start(startTime);o.stop(startTime+duration);
    }
    testSoundForAlarm(i,btn){
        const alarm=this.alarms[i];
        if(alarm.sound==='Custom' && alarm.customSoundUrl){
            this.playCustomSound(alarm.customSoundUrl);
        } else {
            this.playSelectedSound(alarm.sound);
        }
        btn.classList.add('playing');
        setTimeout(()=>btn.classList.remove('playing'),300);
    }
}
let alarmSystem;
document.addEventListener('DOMContentLoaded',()=>{alarmSystem=new MasterControlAlarms();});
document.addEventListener('click',()=>{if(alarmSystem?.audioContext?.state==='suspended') alarmSystem.audioContext.resume();});
</script>
</body>
</html>